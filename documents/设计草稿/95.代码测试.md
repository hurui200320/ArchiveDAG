<h1>代码测试</h1>

[TOC]

## 综述

本项目采用自动化测试。测试代码与对应的逻辑代码同时编写。调试接口时先采用手工使用PostMan，Evans等工具手动调用，确保接口行为符合预期后，将边界条件转化为测试用例，实现为测试代码。

对于大部分比较简单的HTTP接口，采取面向控制器的集成测试。针对被测试的控制器，由Spring自动装配依赖的服务，底层使用内存数据库，以接口为单位进行测试，每个接口至少有一个测试用例以确保功能正确，大多数接口还配有其他用例以测试接口的权限配置及出错处理等。

对于gRPC接口和一部分实现复杂的服务，采取面向服务的单元测试，即针对被测服务，由Mockito框架处理其底层依赖，例如数据库等，重点针对其功能的正确性进行测试。对于gRPC接口则采用Mock底层服务的方式来确保接口能正确处理传入数据。

## 采用集成测试的接口

采用集成测试的HTTP接口有：

+ `AuthController`
+ `UserController`
+ `CertController`
+ `MaintainController`
  + 仅与Config相关的部分。

## 采用单元测试的服务

采用单元测试的服务有：

+ `PatternService`

